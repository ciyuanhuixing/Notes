# 相关面试题作答

### C# 中的委托是什么？

委托是对方法的引用，可以将这个引用赋值给委托类型的变量，这样就让方法的调用方式更加灵活，比如可以将方法作为参数传入另一个方法，这个参数的形参就是委托类型的变量，而实参既可以是委托类型的变量，也可以是方法或 Lambda 表达式。

### 什么是装箱和拆箱？

装箱就是隐式地将一个值类型转换成引用类型，拆箱就是将引用类型转换成值类型。

### 值类型和引用类型有什么区别？

值类型变量的赋值是对值的复制，值变量默认值是 0。引用类型变量的赋值只复制对对象的引用，而不复制对象本身，引用类型变量默认值是`null`。

值类型变量指向的值存储在栈中，引用类型变量指向的对象存储在堆中。

### 用`string`和`StringBuilder`连接字符串时哪个性能高？

一般情况下，使用`StringBuilder`时性能更高，对于简单的字符串连接操作，则不一定，因为创建`StringBuilder`对象也需要耗费资源。

`StringBuilder`默认容量是 16，当字符串长度没有超过容量时，不会分配新的容量，当字符串长度超过容量时，会自动增加容量，所以使用`StringBuilder`时，为了不频繁出现增加容量的操作而导致性能降低，最好指定合适的容量值。

### 以下代码中`a`最终的值是多少？

````c#
byte a = 255;
a += 5;
````

`byte`类型的取值范围是 0 至 255，`a+=1`时，`a`的值为 0，所以`a+=5`时，`a`的值是 4。

### `new`关键字有哪些作用？

1. 作为运算符：可以创建对象实例。
2. 作为修饰符：在派生类定义一个重名的方法，隐藏掉基类方法。
3. 作为约束：定义泛型约束，约束可使用的泛型类型。

### `int?`和`int`有什么区别?

`int?`为可空类型，默认值可以是`null`。`int`默认值是 0。`int?`是通过`int`装箱为引用类型实现。

### `const`和`readonly`有什么区别？

都可以标识一个常量。主要有以下区别：

1. 初始化位置不同。`const`必须在声明的同时赋值；`readonly`即可以在声明处赋值，也可以在静态构造方法里赋值。
2. 修饰对象不同。`const`即可以修饰类的字段，也可以修饰局部变量；`readonly`只能修饰类的字段。
3. `const`是编译时常量，在编译时需要有确定的值，因此只能用于数值和字符串，或者`null`值；`readonly`是运行时常量，在运行时确定值，可以修饰任何类型。
4. `const`默认是静态的；而`readonly`如果设置成静态需要显示声明。

### CTS、CLS、CLR 分别作何解释？

CTS：Common Type System 通用类型系统。.NET 平台中每种语言都定义了自己的类型，CTS 提供了公共的类型，然后翻译生成某种语言对应的类型。

CLS：Common Language Specification 通用语言规范。.NET 平台中每种语言都有自己的语法，CLS 提供了公共的语法，然后不同语言翻译生成对应的语法。

CLR：Common Language Runtime 公共语言运行时，提供 GC 等机制。CLR 相当于一个发动机，负责执行 IL。

### C# 可否对内存直接操作？

C# 在 unsafe 模式下可以使用指针对内存进行操作，但在托管模式下不可以使用指针，C#/.NET 默认在托管模式下运行，要在 unsafe 模式下运行可以在 VS 中设置：选择项目右键--属性--生成--「允许不安全代码」打勾--保存。

### `ref`和`out`有什么区别？

在传参前，`ref`参数必须初始化。`out`参数不需要初始化。

### 关于构造函数说法正确的是哪个？

a) 构造函数可以声明返回类型。

b) 构造函数不可以用`private`修饰

c) 构造函数必须与类名相同

d) 构造函数不能带参数

答案：c

### `Math.Round(11.5)`和`Math.Round(-11.5)`的结果分别是多少?

12 和 -12。

### `i++`和`++i`有什么区别？

`i++`是先赋值，然后再自增；`++i`是先自增，后赋值。

### `as`和`is`有什么区别？

`as`在转换的同时判断类型兼容性，如果无法进行转换，则返回`null`。

`is`只是做类型兼容性判断，并不执行真正的类型转换，返回`true`或`false`，对象为`null`也会返回`false`。

### `class`和`struct`的区别？

1. `class`是引用类型，`struct`是值类型。
2. `class`允许继承、被继承，`struct`只能继承接口。
3. `class`可以有无参的构造函数，`struct`不可以，必须是有参的构造函数，而且在有参的构造函数中必须初始化所有成员。

### 简述一下面向对象的三大特性

封装：把对象的实现细节隐藏起来，仅对外提供公共的访问方法。

继承：对类的扩展和复用。

多态：变量所拥有的方法的版本在运行时才能确定。有了继承后才能重写，有了重写后才能实现多态。

### 构造函数是否能被重写？

构造函数不能被继承，因此不能重写，但可以被重载。

### 简述抽象类和接口的异同

相同点：都不能直接实例化。

不同点：

1. 抽象类用`abstract`修饰；接口用`interface`修饰。
2. 抽象类中的方法可以实现，也可以不实现，有抽象方法的类一定要用`abstract`修饰；接口中的方法不允许实现。
3. 一个类只能继承一个抽象类，但可以实现多个接口。
4. 抽象类有构造函数，接口没有构造函数。

### 简述重写和重载的异同

相同点：重写和重载方法时方法名必须相同。

不同点：

- 重写：用`override`修饰，子类可以重写父类的方法，方法命名、参数、返回类型必须相同。
- 重载：用于同个类中，方法名必须相同，参数必须不同，返回类型可以不同。

### 属性能在接口中声明吗？

可以，但不能有访问修饰符，不能初始化赋值。

### 有 50 万个`int`类型的数字，现在需要判断一下里面是否存在重复的数字，请你简要说一下思路。

两个思路：

1. 使用 C# 的 List 集合自带的去重方法，例如 Distinct()、GroupBy() 等。
2. 利用 Dictionary 的 Key 值唯一的特性或 HashSet 元素值唯一的特性进行判断。

### 什么是闭包？

通过 Lambda 表达式可以访问 Lambda 表达式块外部的变量，这成为了闭包。当引用外部变量时，需要注意，外部变量变化时，lambda 表达式的结果也可能会随着外部变量变化而变化。

### 前台线程和后台线程有什么区别？

前台线程： 必须结束掉所有的前台线程才能自动结束进程，只要有一个前台线程没退出进程就不会自动退出。

后台线程： 要自动结束进程不用考虑后台线程，进程自动退出时所有的后台线程也会自动销毁。

### 多线程有什么用？

- 发挥多核CPU的优势。
- 防止程序阻塞。

### 多线程和异步的区别和联系?

多线程是实现异步的主要方式之一，异步并不等同于多线程。实现异步的方式还有很多，比如利用硬件的特性等。

### ASP.NET MVC 中的 TempData、ViewBag、ViewData 有什么区别?

TempData 保存在 Session 中，TempData 中的值被访问一次后就会自动删除。

ViewBag 和 ViewData 的作用范围只在当前的 Action 中。ViewBag 和 ViewData 所存储的值是相同的，因为 ViewBag 是对 ViewData 的进一步封装，也因此使用 ViewBag 比 ViewData 性能低，ViewBag 是 dynamic 类型，使用时不需要转换类型，而 ViewData 和 TempData 则需要。

### 在项目中如何解决高并发问题？

- 尽量使用缓存，减少与数据库的交互。统计的功能尽量做缓存。
- 优化数据库查询语句、优化数据库结构、多做索引，提高查询效率。
- 能使用静态页面的地方尽量使用。

解决以上问题后，使用服务器集群来解决单台的瓶颈问题。

### ASP.NET MVC 的过滤器有哪些？

- Authorization：用于授权。
- Exception：用于处理异常。
- Action：用于进入 Action 之前或之后的处理。
- Result：用于返回结果之前或之后的处理。

### post 和 get 的区别是什么?

- get 的参数会显示在浏览器地址栏中，而 post 的参数则不会。用 get 的页面可以被搜索引擎抓取，而用 post 的则不可以。

- 用 post 可以提交的数据量非常大，而用 get 可以提交的数据量则非常小（2k），受限于网页地址的长度。用 post 可以进行文件的提交，而用 get 则不可以。

### 什么是 CSRF 攻击，如何避免？

CSRF：Cross Site Request Forgery（中文：跨站请求伪造），可以理解为攻击者盗用了用户的身份，以用户的名义发送恶意请求，比如发送邮件、消息、购买商品，虚拟货币转账等请求。

防御手段：

- 验证请求来源地址。
- 在请求地址中添加 token 并验证。
- 在关键操作中添加验证码。

### ASP.NET 中的六大对象有哪些？

- Request
- Response
- Server
- Application
- Session
- Cookie

### 简述面向对象和面向过程的差异

面向对象编程让数据和逻辑聚合在一起形成了对象，而面向过程编程，逻辑和数据是割裂的，逻辑是生产线，数据只是生产线上的产品。